(this["webpackJsonpmy-test-app"]=this["webpackJsonpmy-test-app"]||[]).push([[0],{58:function(e,t,a){e.exports=a(83)},63:function(e,t,a){},65:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),c=a.n(s),i=(a(63),a(50)),o=a(11),u=a.n(o),l=a(26),d=a(32),p=a(23),f=a(37),m=a(38),b=a(40),v=a(39),h=(a(65),a(47)),g=a.n(h),x=a(51),k=a(118),O=a(85),j=a(123),y=a(120),w=a(122),E=a(121),I=a(119),S=a(114),D=g()(),_=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).filter=Object(p.a)(u.a.mark((function e(){var t,a,r,s,c,i,o,p,f,m,b,v,h,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.boardIDs){e.next=63;break}return e.next=3,D.api("{\n  boards (ids: [".concat(n.state.boardIDs,"]) {\n    id\n    name\n    items (limit: 5000) {\n      id\n      name\n    column_values {\n      id\n        text\n        value\n    }\n    }\n  }\n}"));case 3:t=e.sent,a=[],r=Object(d.a)(t.data.boards),e.prev=6,r.s();case 8:if((s=r.n()).done){e.next=50;break}c=s.value,i=Object(d.a)(c.items),e.prev=11,i.s();case 13:if((o=i.n()).done){e.next=40;break}p=o.value,f=Object(d.a)(p.column_values),e.prev=16,f.s();case 18:if((m=f.n()).done){e.next=30;break}if(b=m.value,n.state.filterUser&&0!==n.state.filterUser.teammates.length){e.next=23;break}return a.push(Object(l.a)(Object(l.a)({},p),{},{boardID:c.id,boardName:c.name})),e.abrupt("break",30);case 23:if("person"!==b.id){e.next=28;break}if(v=JSON.parse(b.value).id,!n.state.filterUser.teammates.includes("".concat(v))){e.next=28;break}return a.push(Object(l.a)(Object(l.a)({},p),{},{boardID:c.id,boardName:c.name})),e.abrupt("break",30);case 28:e.next=18;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(16),f.e(e.t0);case 35:return e.prev=35,f.f(),e.finish(35);case 38:e.next=13;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(11),i.e(e.t1);case 45:return e.prev=45,i.f(),e.finish(45);case 48:e.next=8;break;case 50:e.next=55;break;case 52:e.prev=52,e.t2=e.catch(6),r.e(e.t2);case 55:return e.prev=55,r.f(),e.finish(55);case 58:return e.next=60,D.storage.instance.getItem("order");case 60:(h=e.sent)&&h.data.value&&(g=h.data.value.split(","),a=g.map((function(e){return a.find((function(t){return t.id===e}))}))),n.setState({list:a});case 63:case"end":return e.stop()}}),e,null,[[6,52,55,58],[11,42,45,48],[16,32,35,38]])}))),n.state={list:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.listen("settings",(function(e){t.setState({filterUser:e.data.users},(function(){t.filter()}))})),D.listen("context",function(){var e=Object(p.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.data.boardIds){e.next=8;break}if(t.setState({boardIDs:a.data.boardIds},(function(){t.filter()})),!(a.data.boardIds&&a.data.boardIds.length>0)){e.next=8;break}return e.next=5,D.api("{\n            boards (ids: [".concat(a.data.boardIds[0],"]) {\n              columns {\n                id\n                title\n                settings_str\n              }\n            }\n          }"));case 5:n=e.sent,r=n.data.boards[0].columns.find((function(e){return"status"===e.id})),t.setState({statusColSettings:JSON.parse(r.settings_str)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{className:"App"},r.a.createElement("div",{style:{padding:10}},r.a.createElement(k.a,null,r.a.createElement(x.a,{list:this.state.list,setList:function(){var t=Object(p.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({list:a}),!((n=a.map((function(e){return e.id}))).length>0)){t.next=5;break}return t.next=5,D.storage.instance.setItem("order",n.join(","));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},this.state.list.map((function(t){return r.a.createElement(C,{item:t,key:t.id,statusColSettings:e.state.statusColSettings})})))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(I.a,{variant:"contained",onClick:function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.storage.instance.deleteItem("order");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},"Clear Order"))))}}]),a}(r.a.Component),C=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={status:e.props.item.column_values.find((function(e){return"status"===e.id}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginTop:5,marginBottom:5,padding:5}},r.a.createElement(y.a,{container:!0,spacing:2},r.a.createElement(O.a,{button:!0},r.a.createElement(y.a,{item:!0,xs:9},r.a.createElement(j.a,null,this.props.item.name)),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(w.a,{style:{width:"100%"},value:this.state.status?this.state.status.text:"(empty)",onChange:function(t){var a;e.setState({status:{text:t.target.value}});for(var n=0,r=Object.entries(e.props.statusColSettings.labels);n<r.length;n++){var s=Object(i.a)(r[n],2),c=s[0];s[1]===t.target.value&&(a=c)}D.api("mutation { change_column_value (item_id: ".concat(e.props.item.id,", board_id: ").concat(e.props.item.boardID,', column_id: "status", value: "').concat(JSON.stringify({index:parseInt(a)}).replace(/"/g,'\\"'),'"){id}}')).catch((function(e){console.log(e)}))}},["Backlog","Hot Fix","Doing","Done","Roadblocked","In Process","On Hold","To Do","(empty)"].map((function(e,t){return r.a.createElement(E.a,{value:e,key:t},e)})))))))}}]),a}(r.a.Component),N=_;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.d4918c0f.chunk.js.map